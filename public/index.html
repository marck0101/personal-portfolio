<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="./logo.png" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      media="screen"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />

    <base href="/" />
    <meta name="description" content="developer portfolio" />
    <meta
      name="keyword"
      content="portfolio, javascript, developer, frontend, react, dev, front-end, tech, programmer"
    />
    <link rel="logo" href="./logo.png" />

    <!-- Consent Mode (v2) + dataLayer stub (sem gtag.js) -->
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      // Padrões antes do consentimento
      gtag('consent', 'default', {
        ad_user_data: 'denied',
        ad_personalization: 'denied',
        ad_storage: 'denied',
        analytics_storage: 'denied',
        wait_for_update: 500,
      })
    </script>

    <title>Marck0101 | Developer</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->

    <!-- Vendors: GTM, FB Pixel, Clarity - carregamento adiado -->
    <script>
      ;(function () {
        var GTM_ID = 'GTM-KSZJXTHM'
        var FB_ID = '1042435387262327'
        var CLARITY_ID = 'lyju0gbkv7'

        function onIdle(fn) {
          if ('requestIdleCallback' in window) {
            requestIdleCallback(fn, { timeout: 4000 })
          } else setTimeout(fn, 3000)
        }

        // GTM: injeta apenas quando chamado (sem gtag.js externo)
        function loadGTM() {
          if (window._gtmLoaded) return
          window._gtmLoaded = true
          ;(function (w, d, s, l, i) {
            w[l] = w[l] || []
            w[l].push({ 'gtm.start': Date.now(), event: 'gtm.js' })
            var f = d.getElementsByTagName(s)[0],
              j = d.createElement(s),
              dl = l != 'dataLayer' ? '&l=' + l : ''
            j.async = true
            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl
            f.parentNode.insertBefore(j, f)
          })(window, document, 'script', 'dataLayer', GTM_ID)
        }

        // FB Pixel: stub agora, biblioteca depois
        ;(function (f) {
          if (f.fbq) return
          var n = (f.fbq = function () {
            n.callMethod
              ? n.callMethod.apply(n, arguments)
              : n.queue.push(arguments)
          })
          if (!f._fbq) f._fbq = n
          n.push = n
          n.loaded = false
          n.version = '2.0'
          n.queue = []
        })(window)
        function loadFB() {
          if (window._fbLoaded) return
          window._fbLoaded = true
          var s = document.createElement('script')
          s.async = true
          s.src = 'https://connect.facebook.net/en_US/fbevents.js'
          document.head.appendChild(s)
          fbq('init', FB_ID)
          fbq('track', 'PageView')
        }

        // Clarity: injeta depois
        function loadClarity() {
          if (window._clarityLoaded) return
          window._clarityLoaded = true
          ;(function (c, l, a, r, i, t, y) {
            c[a] =
              c[a] ||
              function () {
                ;(c[a].q = c[a].q || []).push(arguments)
              }
            t = l.createElement(r)
            t.async = 1
            t.src = 'https://www.clarity.ms/tag/' + i
            y = l.getElementsByTagName(r)[0]
            y.parentNode.insertBefore(t, y)
          })(window, document, 'clarity', 'script', CLARITY_ID)
        }

        function enableVendors() {
          loadGTM()
          loadFB()
          loadClarity()
        }

        // Dispara após load+idle OU na 1ª interação (o que vier primeiro)
        var fired = false
        function fire() {
          if (fired) return
          fired = true
          enableVendors()
        }

        window.addEventListener(
          'load',
          function () {
            onIdle(fire)
          },
          { once: true }
        )
        ;['click', 'keydown', 'touchstart', 'scroll'].forEach(function (evt) {
          window.addEventListener(evt, fire, { once: true, passive: true })
        })
      })()
    </script>

    <!-- Noscript do Pixel (opcional) -->
    <noscript
      ><img
        height="1"
        width="1"
        style="display: none"
        src="https://www.facebook.com/tr?id=1042435387262327&ev=PageView&noscript=1"
    /></noscript>
  </body>
</html>
